---
layout: post
title: 2017编程提高第一节课(作业)
date: 2017-06-15 09:29
categories: 2017编程提高
tags: [软件工程,SRP,单一职责原则]
---

* content
{:toc}

# 问题
重构一个简单邮件发送，使之符合单一职责原则(SRP)

# 解题
## 分析
我们知道的是单一职责原则简单来说就是一个类只负责一件事，所以我们的任务是把含有多件事的类拆分开，所以先来看一下原代码中的结构和流程

![原始流程][1]
这里用思维导图简单地表示了一下类结构和业务流程
### 流程
这个邮件处理的流程比较简单，如上图所示，即读取三个数据
1. 商品降价数据
2. 邮件发送服务器数据
3. 需要发送的用户数据

然后根据以上三个信息发送邮件即可，当然其中还涉及一些数据的处理，但这三个获取数据的步骤+发送邮件就构成了整个逻辑，重构将以实现这四件事为中心来重构
### 类结构
从途中可以明显看到，所有的获取数据和处理都放在了`PromotionMail`这个类中，显然不符合单一职责原则，所以这个类中的方法必须拆分

## 重构


  [1]: http://olwt21mf4.bkt.clouddn.com/17-6-15/66201134.jpg "原始流程"